# vim: syntax=config


###########
# General #
###########
keepaspect-window=no
#Custom
#opengl-backend=wayland
osc=yes
term-playing-msg='Resolution: ${width}x${height}, Framerate: ${container-fps} Hz'
save-position-on-quit
msg-color                               # color log messages on terminal
term-osd-bar                            # display a progress bar on the terminal
#pause                                   # no autoplay
keep-open                               # keep the player open when a file's end is reached
autofit-larger=100%x95%  
autofit=1280x720              				 # resize window in case it's larger than W%xH% of the screen
geometry=1280x720
deinterlace=yes                    # 'auto' does not imply interlacing-detection
cursor-autohide-fs-only                 # don't autohide the cursor in window mode, only fullscreen
#input-media-keys=enable                   # enable/disable OSX media keys
cursor-autohide=800                    # autohide the curser after 1s
#ontop
#yt-dl bestvideo+bestaudio
ytdl-format='(bestvideo[ext=mp4][height<1080]/bestvideo[height<1080])+(bestaudio[abr>128]/bestaudio)/best[ext=mp4][height<1080]/best[height<1080]/best' 
--screenshot-template='/home/lich/pictures/video_screenshots/%F_%P_%n.png'

hls-bitrate=max                         # use max quality for HLS streams
#ytdl-raw-options=format="[protocol!=http_dash_segments][protocol!=rtmp]"
########
# LOOP #
########


#########
# Cache #
#########

cache=yes
cache-default=1500000                   # size in KB
cache-backbuffer=25000                  # size in KB
cache-initial=0                         # start playback when your cache is filled up with x kB
cache-secs=120                           # how many seconds of audio/video to prefetch if the cache is active


#############
# OSD / OSC #
#############

osd-level=1                             # enable osd and display --osd-status-msg on interaction
osd-duration=2500                       # hide the osd after x ms

osd-font='Source Sans Pro'
osd-font-size=20
osd-color='#CCFFFFFF'                   # ARGB format
osd-border-color='#DD322640'            # ARGB format
osd-shadow-offset=1                    # pixel width for osd text and progress bar
osd-bar-align-y=0                       # progress bar y alignment (-1 top, 0 centered, 1 bottom)
osd-border-size=5                       # size for osd text and progress bar
osd-bar-h=2                             # height of osd bar as a fractional percentage of your screen height
osd-bar-w=60                            # width of " " "


#############
# Subtitles #
#############

sub-use-margins
sub-ass-force-margins
blend-subtitles=no
demuxer-mkv-subtitle-preroll            # try to correctly show embedded subs when seeking
sub-auto=fuzzy                          # external subs don't have to match the file name exactly to autoload
sub-file-paths=ass:srt:sub:subs:subtitles    # search for external subs in the listed subdirectories
embeddedfonts=yes                       # use embedded fonts for SSA/ASS subs
sub-fix-timing=no                       # do not try to fix gaps (which might make it worse in some cases)
sub-ass-force-style=Kerning=yes         # allows you to override style parameters of ASS scripts

# the following options only apply to subtitles without own styling (i.e. not ASS but e.g. SRT)
#sub-text-font="Source Sans Pro Semibold"
#sub-color="#ffffff"
sub-border-color="#000000"
sub-shadow-offset=1
sub-shadow-color="#01000000"
#sub-spacing=0.6
sub-font="Source Sans Pro Semibold"
sub-color="#FFFFFFFF"
sub-border-size=3
sub-font-size=44
sub-spacing=0.6
sub-shadow-offset=1
#############
# Languages #
#############

slang=enm,en,eng,pl,de,deu,ger             # automatically select these subtitles (decreasing priority)
alang=ja,jp,jpn,en,eng,de,deu,ger       # automatically select these audio tracks (decreasing priority)


#########
# Audio #
#########

audio-file-auto=fuzzy                   # external audio doesn't has to match the file name exactly to autoload
audio-pitch-correction=yes              # automatically insert scaletempo when playing with higher speed
volume-max=200                          # maximum volume in %, everything above 100 results in amplification
volume=100                              # default volume, 100 = unchanged


################
# Video Output #
################

# Active VOs (and some other options) are set conditionally
# See here for more information: https://github.com/wm4/mpv-scripts/blob/master/auto-profiles.lua
# The script was slightly modified, functions from scripts/auto-profiles-functions.lua are imported

# Defaults for all profiles
opengl-pbo=yes # helps with performance
hwdec=vaapi
vo=vaapi
tscale=linear

# I don't want to wait ages for the window to finally show up before I can move my focus around again
[protocol.http]
force-window=immediate
no-resume-playback
[protocol.https]
profile=protocol.http

[protocol.ytdl]
profile=protocol.http

# Audio-only content
[audio]
mute=no
force-window=no
no-video
ytdl-format=bestaudio/best

[normalize]
af=lavfi=[loudnorm=I=-16:TP=-3:LRA=4]

# Play a youtube playlist in reverse
[reverse]
ytdl-raw-options=playlist-reverse=

# Fix up broken color ranges
[fixtv]
contrast=9
brightness=-7

# Image files (e.g. for using mpv as a pseudo image viewer)
[image]
profile=noauto
mute=yes
scale=ewa_lanczossharp
background=0.1
input-conf=~~/input-image.conf
video-unscaled=yes
video-aspect=no
title="mvi - ${?media-title:${media-title}}${!media-title:No file}"
image-display-duration=inf
loop-file=yes
sub-auto=no
audio-file-auto=no

[extension.gif]
interpolation=no

[nocms]
profile=image

[web]
profile=normalize
loop-file=yes

[booru]
profile=image
video-unscaled=no
force-window=immediate

[extension.webm]
loop-file=inf

[extension.gif]
loop-file=inf
